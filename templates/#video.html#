{% extends "maintemplate.html" %}
{% block head %}
<title>{{title | clean_video_name}}</title>
<link rel="stylesheet" href="/data/video.css">
{% endblock %}
{% block body %}
<div id="videopage">
  <div align=center id="videobox">
    <video width="98%" height="90%" controls poster="/videos/{{ path.lstrip('/vidfile').split('/')[0] }}/thumb" id="videoplayer">
      <source src="{{ path }}" type="video/mp4">
        <source src="{{ path }}" type="video/webm">
    </video>
    <h1>{{ title | clean_video_name | safe }}</h1>
    <hr>
    <p id="description">{{ description | safe | urlize(40, true) }}<br></p>
  </div>
  <div id="videolist">
    {% for video in videos %}
    <a href="/videos/video">
      <img src="/videos/{{video}}/thumb"/>
      <span>{{video | clean_video_name}}</span>
    </a>
    {% endfor %}
  </div>
</div>

<script>
    function getParameter(key) {
        address = window.location.search;
        parameterList = new URLSearchParams(address);
        return parameterList.get(key);
    }

    if (getParameter("t")) {
        document.getElementById("videoplayer").currentTime = getParameter("t");
    }
</script>
{% endblock %}
